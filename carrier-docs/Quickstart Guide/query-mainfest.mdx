---
sidebar_position: 4
---

# Query manifest

Upon creating a manifest [here](/carrier-docs/Quickstart%20Guide/create-manifest),
you can query the entire manifest or particuler shipment(s) to get the status of the same. There are two ways to
query the manifest:
- *Stringified* JSON object - This is the <span style={{color: 'green'}}>RECOMMENDED</span> method of querying the manifest.
- Querystring array - This is the alternate method of querying the manifest.

## Query request

In either of the ways, the query is made using the `GET` method. The query is made
to the following endpoint:

`/api/carrier/[CARRIER_ID]/getShipmentStatuses?trackingNumbers`

### Querying the manifest using *stringified* JSON object

The JSON.stringify method is the recommended method of querying the manifest.
This method is used to query the manifest in a more readable format.

```js title="Query string RECOMMENDED"
const shipments = JSON.stringify([
    "PDXXXXXXXXX1",
    "PDXXXXXXXXX2",
    "PDXXXXBADXX3"
])

const query = `${PEDDLER_API_DOMAIN}/api/carrier/${CARRIER_ID}/getShipmentStatuses?trackingNumbers=${shipments}`
```

### Querying the manifest using Querystring *array*

The Array method is the alternate method of querying the manifest. This method
is used to query the manifest in a more compact format.

```js title="Query string ALT"
const query = `${PEDDLER_API_DOMAIN}/api/carrier/${CARRIER_ID}/getShipmentStatuses
?trackingNumbers[0]=PDXXXXXXXXX1&trackingNumbers[1]=PDXXXXXXXXX2&trackingNumbers[2]=PDXXXXBADXX3`
```

:::caution Limit of tracking numbers

The maximum number of tracking numbers that can be queried at once is **100**.

:::


## Query response

:::info Inquiry number

- The `inquiryNumber` is the unique identifier for the shipment. It is used to query the shipment status.
  In other words, it is the tracking request number for the shipment.

- The `events` array contains the status of the shipment in chronological (ascending) order.

:::

```json title="Response body"
{
	"data": {
		"inquiryNumber": "PD001",
		"trackingUrl": "https://track.pdlr.nl/PD001",
		"consignee": {
			"address": {
				"displayAddress": "12 John M. Keynesplein, 1066 EP, Amsterdam, NL",
				"name": "PDC 01 AMS",
				"house": "12",
				"address1": "John M. Keynesplein",
				"address2": "B gebouw amsterdam",
				"city": "Amsterdam",
				"postCode": "1066 EP",
				"country": "NL",
				"location": {
					"lat": "52.1031255",
					"lng": "5.0814312"
				}
			}
		},
		"sender": {
			"address": {
				"displayAddress": "Pudongweg 13, 1437 EM Rozenburg, NL",
				"name": "YunExpress Netherlands B.V.",
				"house": "1213",
				"address1": "Pudongweg",
				"city": "Rozenburg",
				"postCode": "1437 EM",
				"country": "NL",
				"location": {
					"lat": "52.1031255",
					"lng": "5.0814312"
				}
			}
		},
		"package": {
			"trackingNumber": "PD001",
			"estimatedDeliveryDate": "2023-07-18T15:43:24.133Z",
			"deliveryDate": "2023-07-10T15:43:24.133Z",
			"canceledDate": "2023-07-10T15:43:24.133Z",
			"returnToSenderDate": "2023-07-10T15:43:24.133Z",
			"events": [{
				"status": "SHIPMENT_CONFIRMED",
				"ts": "2023-07-10T15:43:24.133Z",
				"details": {
					"headline": {
						"en": "Shipment confirmed",
						"nl": "Verzending bevestigd"
					},
					"description": {
						"en": "Shipment created by sender",
						"nl": "Verzending aangemaakt door afzender"
					},
					"estimatedDeliveryDate": "2023-07-18T15:43:24.133Z"
				}
			}, {
				"status": "SHIPMENT_ENROUTE_TO_WAREHOUSE",
				"ts": "2023-07-11T15:43:24.133Z",
				"gps": {
					"lat": "52.1031255",
					"lng": "5.0814312"
				},
				"details": {
					"headline": {
						"en": "Enroute to depot",
						"nl": "Onderweg naar depot"
					},
					"description": {
						"en": "Shipment enroute to depot",
						"nl": "Verzending onderweg naar depot"
					},
					"estimatedDeliveryDate": "2023-07-18T15:43:24.133Z"
				}
			}, {
				"status": "SHIPMENT_IN_WAREHOUSE",
				"ts": "2023-07-12T15:43:24.133Z",
				"gps": {
					"lat": "52.1031255",
					"lng": "5.0814312"
				},
				"details": {
					"headline": {
						"en": "Package at local warehouse",
						"nl": "Pakket in lokaal depot"
					},
					"description": {
						"en": "Package scanned at local warehouse",
						"nl": "Pakket gescanned in lokaal depot"
					},
					"estimatedDeliveryDate": "2023-07-18T15:43:24.133Z",
					"warehouse": {
						"address": {
							"name": "PDC 01 AMS",
							"address1": "John M. Keynesplein",
							"city": "Amsterdam",
							"postCode": "1066 EP",
							"country": "NL",
							"location": {
								"lat": "52.1031255",
								"lng": "5.0814312"
							},
							"phone": "+31 012345678"
						}
					}
				}
			}, {
				"status": "OUT_FOR_DELIVERY",
				"ts": "2023-07-18T15:43:24.133Z",
				"gps": {
					"lat": "52.1031255",
					"lng": "5.0814312"
				},
				"details": {
					"headline": {
						"en": "Out for delivery",
						"nl": "Uit voor levering"
					},
					"description": {
						"en": "Package enroute to destination",
						"nl": "Pakket onderweg naar bestemming"
					},
					"courierName": "jay",
					"estimatedDeliveryDate": "2023-07-18T15:43:24.133Z"
				}
			}, {
				"status": "DELIVERED",
				"ts": "2023-07-10T15:43:24.133Z",
				"gps": {
					"lat": "52.1031255",
					"lng": "5.0814312"
				},
				"details": {
					"headline": {
						"en": "Delivered",
						"nl": "Bezorgd"
					},
					"description": {
						"en": "Package delivered",
						"nl": "Pakket bezorgd"
					},
					"deliveryDate": "2023-07-18T15:43:24.133Z",
					"courierName": "jay",
					"courierComment": "FRONT DOOR",
					"deliveredAtNeighbours": "46 John M. Keynesplein"
				}
			}, {
				"status": "DELIVERED_COLLECTION_POINT",
				"ts": "2023-07-19T15:43:24.133Z",
				"gps": {
					"lat": "52.1031255",
					"lng": "5.0814312"
				},
				"details": {
					"headline": {
						"en": "Delivered at collection point",
						"nl": "Afgeleverd op afhaalpunt"
					},
					"description": {
						"en": "Package delivered at collection point",
						"nl": "Pakket afgeleverd op afhaalpunt"
					},
					"collectionPoint": {
						"address": {
							"displayAddress": "12 John M. Keynesplein, 1066 EP, Amsterdam, NL",
							"name": "COLLECT 01 AMS",
							"address1": "John M. Keynesplein",
							"city": "Amsterdam",
							"postCode": "1066 EP",
							"country": "NL",
							"location": {
								"lat": "52.1031255",
								"lng": "5.0814312"
							}
						}
					},
					"courierName": "jay",
					"courierComment": "Scanned by collectionpoint"
				}
			}, {
				"status": "FAILED_ATTEMPT",
				"ts": "2023-07-20T15:43:24.133Z",
				"gps": {
					"lat": "52.1031255",
					"lng": "5.0814312"
				},
				"details": {
					"reason": "Customer not answering",
					"nextAttemptDate": "2023-07-10T15:43:24.133Z",
					"contactSupport": true,
					"headline": {
						"en": "Delivery failed",
						"nl": "Afleverpoging mislukt"
					},
					"description": {
						"en": "Delivery attempt failed at destination",
						"nl": "Afleverpoging mislukt op bestemming"
					}
				}
			}, {
				"status": "ON_HOLD",
				"ts": "2023-07-10T15:43:24.133Z",
				"details": {
					"headline": {
						"en": "Shipment on hold",
						"nl": "Verzending opgeschort"
					},
					"description": {
						"en": "Shipment is currently on hold and waiting to be released by support",
						"nl": "De zending staat momenteel opgeschort en wacht op vrijgave"
					}
				}
			}, {
				"status": "EXCEPTION",
				"ts": "2023-07-10T15:43:24.133Z",
				"details": {
					"reason": "An issue described by the support team",
					"headline": {
						"en": "Exception",
						"nl": "Uitzondering"
					},
					"description": {
						"en": "Shipment is currently being processed by support",
						"nl": "Verzending wordt momenteel verwerkt door support"
					}
				}
			}, {
				"status": "RETURN_TO_SENDER",
				"ts": "2023-07-10T15:43:24.133Z",
				"details": {
					"headline": {
						"en": "Return to sender",
						"nl": "Terug naar afzender"
					},
					"description": {
						"en": "Shipment is returned to sender",
						"nl": "Verzending wordt teruggestuurd naar afzender"
					}
				}
			}, {
				"status": "CANCELED",
				"ts": "2023-07-10T15:43:24.133Z",
				"details": {
					"headline": {
						"en": "Canceled",
						"nl": "Geannuleerd"
					},
					"description": {
						"en": "Shipment has been canceled",
						"nl": "Verzending is geannuleerd"
					}
				}
			}, {
				"status": "SHIPMENT_DETAILS_UPDATED",
				"ts": "2023-07-10T15:43:24.133Z",
				"details": {
					"headline": {
						"en": "Shipment details updated",
						"nl": "Verzendingsgegevens bijgewerkt"
					},
					"description": {
						"en": "Shipment has been updated by consignee or support",
						"nl": "Verzending is bijgewerkt door ontvanger of support"
					},
					"originalShipment": " ...shipment",
					"updatedByType": "CONSIGNEE",
					"updatedByName": "Jon doe",
					"updated": {
						"deliveryDate": "2023-07-10T15:43:24.133Z",
						"collectionPoint": {
							"address": {
								"name": "COLLECT 01 AMS",
								"address1": "John M. Keynesplein",
								"city": "Amsterdam",
								"postCode": "1066 EP",
								"country": "NL",
								"location": {
									"lat": "52.1031255",
									"lng": "5.0814312"
								}
							}
						}
					}
				}
			}]
		}
	}
}
```

:::caution 404 Not Found

If the trackingNumber cannot be found, it will contain an error object. But the HTTP status code will be 200.

```json	title="Not Found Response"
{
  "data": [
    {
        "inquiryNumber": "PDXXXXBADXX3",
        "error": {
          "code": 404,
          "message": "NOT FOUND"
        },
        "package": null
    }
  ]
}
```

:::tip Description of statuses

The detailed exaplanation of the statuses can be found in the [table](/carrier-docs/Quickstart%20Guide/shipment-lifecycle#table-of-status) in the next page.

:::